# ===========================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ===========================================
# Copy this file to .env on your production server
# Replace all placeholder values with your actual credentials
# NEVER commit the actual .env file to version control

# Application
APP_NAME="Pro Hub API"
APP_ENV=production
APP_KEY=                                    # Generate with: php artisan key:generate
APP_DEBUG=false                             # MUST be false in production
APP_TIMEZONE=America/Mexico_City
APP_URL=https://api.tu-dominio.com         # Your actual API domain

# Frontend URL (for CORS)
FRONTEND_URL=https://app.tu-dominio.com    # Your Vercel frontend URL

# Localization
APP_LOCALE=es
APP_FALLBACK_LOCALE=es
APP_FAKER_LOCALE=es_ES

# Maintenance
APP_MAINTENANCE_DRIVER=file

# Security
BCRYPT_ROUNDS=12

# Logging
LOG_CHANNEL=stack
LOG_STACK=daily                            # Use daily rotation in production
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=info                             # Use 'info' in production, not 'debug'

# ===========================================
# DATABASE - PostgreSQL
# ===========================================
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=pro_hub_db                     # Your database name
DB_USERNAME=pro_hub_user                   # Your database user
DB_PASSWORD=                               # Strong password here!

# ===========================================
# SESSION
# ===========================================
SESSION_DRIVER=redis
SESSION_LIFETIME=120                       # 2 hours
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=.tu-dominio.com            # Your domain with leading dot

# ===========================================
# CACHE - Redis
# ===========================================
CACHE_STORE=redis
CACHE_PREFIX=pro_hub_cache_

# ===========================================
# QUEUE - Redis with Horizon
# ===========================================
QUEUE_CONNECTION=redis

# ===========================================
# REDIS
# ===========================================
REDIS_CLIENT=phpredis                      # Use phpredis for better performance
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null                        # Set password if Redis is exposed
REDIS_PORT=6379

# ===========================================
# MAIL
# ===========================================
# Configure with your mail provider (Mailgun, SendGrid, SES, etc.)

MAIL_MAILER=smtp
MAIL_HOST=smtp.mailgun.org                # Your SMTP host
MAIL_PORT=587
MAIL_USERNAME=                             # Your SMTP username
MAIL_PASSWORD=                             # Your SMTP password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@tu-dominio.com"
MAIL_FROM_NAME="${APP_NAME}"

# Mailgun (if using Mailgun)
MAILGUN_DOMAIN=
MAILGUN_SECRET=
MAILGUN_ENDPOINT=api.mailgun.net

# SendGrid (if using SendGrid)
SENDGRID_API_KEY=

# ===========================================
# AWS S3 (Optional - for file storage)
# ===========================================
FILESYSTEM_DISK=local                      # Use 's3' if using AWS S3

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# ===========================================
# JWT AUTHENTICATION
# ===========================================
JWT_SECRET=                                # Generate with: php artisan jwt:secret
JWT_TTL=60                                 # Access token lifetime (60 minutes)
JWT_REFRESH_TTL=20160                      # Refresh token lifetime (14 days)
JWT_ALGO=HS256
JWT_BLACKLIST_ENABLED=true
JWT_BLACKLIST_GRACE_PERIOD=0
JWT_SHOW_BLACKLIST_EXCEPTION=true

# ===========================================
# AUTHENTICATION
# ===========================================
AUTH_MAX_SESSIONS=5                        # Max concurrent sessions per user

# ===========================================
# SANCTUM
# ===========================================
SANCTUM_STATEFUL_DOMAINS=api.tu-dominio.com,app.tu-dominio.com

# ===========================================
# LIGHTHOUSE GRAPHQL
# ===========================================
LIGHTHOUSE_CACHE_ENABLE=true               # Enable schema caching in production
LIGHTHOUSE_CACHE_VERSION=1
GRAPHQL_PLAYGROUND_ENABLED=false           # MUST be false in production

# ===========================================
# BROADCASTING
# ===========================================
BROADCAST_CONNECTION=log                   # Use 'pusher' or 'redis' if needed

# Pusher (if using)
PUSHER_APP_ID=
PUSHER_APP_KEY=
PUSHER_APP_SECRET=
PUSHER_APP_CLUSTER=mt1

# ===========================================
# MONITORING & ERROR TRACKING
# ===========================================

# Sentry (Optional but recommended)
SENTRY_LARAVEL_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.2

# ===========================================
# PERFORMANCE
# ===========================================

# Octane (Optional - for high performance)
OCTANE_SERVER=roadrunner                   # or 'swoole'

# ===========================================
# MAINTENANCE MODE
# ===========================================
# Use a secret token to bypass maintenance mode
# Access with: https://api.tu-dominio.com?secret=YOUR_SECRET
MAINTENANCE_SECRET=                        # Random string for bypass

# ===========================================
# TRUSTED PROXIES (if behind load balancer)
# ===========================================
TRUSTED_PROXIES=*                          # Or specific proxy IPs

# ===========================================
# CORS CONFIGURATION
# ===========================================
# Handled by Nginx, but can be configured here too
CORS_ALLOWED_ORIGINS=https://app.tu-dominio.com,https://home-page-ui.vercel.app

# ===========================================
# RATE LIMITING
# ===========================================
# Configured in routes, but can override here
API_RATE_LIMIT=60                          # Requests per minute

# ===========================================
# VITE (if using)
# ===========================================
VITE_APP_NAME="${APP_NAME}"

# ===========================================
# DEPLOYMENT
# ===========================================
# Used by CI/CD (GitHub Actions)
# These should be set as GitHub Secrets, not in .env

# SERVER_IP=your.server.ip
# SERVER_USER=deployer
# APP_PATH=/var/www/pro_hub_started
# SSH_PRIVATE_KEY=your-private-key

# ===========================================
# NOTES
# ===========================================
# After setting up this file:
# 1. php artisan key:generate
# 2. php artisan jwt:secret
# 3. php artisan config:cache
# 4. php artisan route:cache
# 5. php artisan lighthouse:cache
# 6. sudo chmod 640 .env
# 7. sudo chown deployer:www-data .env
